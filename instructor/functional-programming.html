<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Intermediate Research Software Development: Extra Content: Functional Programming</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../functional-programming.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Intermediate Research Software Development
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Intermediate Research Software Development
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="quiz.html">Quiz</a></li><li><a class="dropdown-item" href="installation-instructions.html">Installation Instructions</a></li><li><a class="dropdown-item" href="common-issues.html">Common Issues, Fixes &amp; Tips</a></li><li><a class="dropdown-item" href="software-architecture-extra.html">Extra Content: Software Architecture</a></li><li><a class="dropdown-item" href="programming-paradigms.html">Extra Content: Programming Paradigms</a></li><li><a class="dropdown-item" href="procedural-programming.html">Extra Content: Procedural Programming</a></li><li><a class="dropdown-item" href="functional-programming.html">Extra Content: Functional Programming</a></li><li><a class="dropdown-item" href="object-oriented-programming.html">Extra Content: Object Oriented Programming</a></li><li><a class="dropdown-item" href="persistence.html">Extra Content: Persistence</a></li><li><a class="dropdown-item" href="databases.html">Extra Content: Databases</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Intermediate Research Software Development
</div>

<aside class="col-md-12 lesson-progress"><div style="width: NA%" class="percentage">
    NA%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: NA%" aria-valuenow="NA" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../functional-programming.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-setting-the-scene.html">Setting the Scene</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="10-section1-intro.html">Section 1: Setting Up Environment For Collaborative Code Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="11-software-project.html">1.1 Introduction to Our Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="12-virtual-environments.html">1.2 Virtual Environments For Software Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="13-ides.html">1.3 Integrated Software Development Environments</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="14-collaboration-using-git.html">1.4 Software Development Using Git and GitHub</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="15-coding-conventions.html">1.5 Python Code Style Conventions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="16-verifying-code-style-linters.html">1.6 Verifying Code Style Using Linters</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="17-section1-optional-exercises.html">1.7 Optional Exercises</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="20-section2-intro.html">Section 2: Ensuring Correctness of Software at Scale</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="21-automatically-testing-software.html">2.1 Automatically Testing Software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="22-scaling-up-unit-testing.html">2.2 Scaling Up Unit Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="23-continuous-integration-automated-testing.html">2.3 Continuous Integration for Automated Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="24-diagnosing-issues-improving-robustness.html">2.4 Diagnosing Issues and Improving Robustness</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="25-section2-optional-exercises.html">2.5 Optional Exercises for Section 2</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="30-section3-intro.html">Section 3: Software Development as a Process</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="31-software-requirements.html">3.1 Software Requirements</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="32-software-architecture-design.html">3.2 Software Architecture and Design</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush20">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading20">
        <a href="33-code-decoupling-abstractions.html">3.3 Code Decoupling &amp; Abstractions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="34-code-refactoring.html">3.4 Code Refactoring</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="35-software-architecture-revisited.html">3.5 Software Architecture Revisited</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="40-section4-intro.html">Section 4: Collaborative Software Development for Reuse</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="41-code-review.html">4.1 Developing Software In a Team: Code Review</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush25">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading25">
        <a href="42-software-reuse.html">4.2 Preparing Software for Reuse and Release</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush26">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading26">
        <a href="43-software-release.html">4.3 Packaging Code for Release and Distribution</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush27">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading27">
        <a href="50-section5-intro.html">Section 5: Managing and Improving Software Over Its Lifetime</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush28">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading28">
        <a href="51-managing-software.html">5.1 Managing a Collaborative Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush29">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading29">
        <a href="52-assessing-software-suitability-improvement.html">5.2 Assessing Software for Suitability and Improvement</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush30">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading30">
        <a href="53-improvement-through-feedback.html">5.3 Software Improvement Through Feedback</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush31">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading31">
        <a href="60-wrap-up.html">Wrap-up</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="quiz.html">Quiz</a></li><li><a class="dropdown-item" href="installation-instructions.html">Installation Instructions</a></li><li><a class="dropdown-item" href="common-issues.html">Common Issues, Fixes &amp; Tips</a></li><li><a class="dropdown-item" href="software-architecture-extra.html">Extra Content: Software Architecture</a></li><li><a class="dropdown-item" href="programming-paradigms.html">Extra Content: Programming Paradigms</a></li><li><a class="dropdown-item" href="procedural-programming.html">Extra Content: Procedural Programming</a></li><li><a class="dropdown-item" href="functional-programming.html">Extra Content: Functional Programming</a></li><li><a class="dropdown-item" href="object-oriented-programming.html">Extra Content: Object Oriented Programming</a></li><li><a class="dropdown-item" href="persistence.html">Extra Content: Persistence</a></li><li><a class="dropdown-item" href="databases.html">Extra Content: Databases</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Extra Content: Functional Programming</h1>
        <p>Last updated on 2024-12-06 |

        <a href="https://github.com/carpentries-incubator/python-intermediate-development/edit/main/learners/functional-programming.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What is functional programming?</li>
<li>Which situations/problems is functional programming well suited
for?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe the core concepts that define the functional programming
paradigm</li>
<li>Describe the main characteristics of code that is written in
functional programming style</li>
<li>Learn how to generate and process data collections efficiently using
MapReduce and Python’s comprehensions</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>Functional programming is a programming paradigm where programs are
constructed by applying and composing/chaining
<strong>functions</strong>. Functional programming is based on the <a href="https://en.wikipedia.org/wiki/Function_(mathematics)" class="external-link">mathematical
definition of a function</a> <code>f()</code>, which applies a
transformation to some input data giving us some other data as a result
(i.e. a mapping from input <code>x</code> to output <code>f(x)</code>).
Thus, a program written in a functional style becomes a series of
transformations on data which are performed to produce a desired output.
Each function (transformation) taken by itself is simple and
straightforward to understand; complexity is handled by composing
functions in various ways.</p>
<p>Often when we use the term function we are referring to a construct
containing a block of code which performs a particular task and can be
reused. We have already seen this in procedural programming - so how are
functions in functional programming different? The key difference is
that functional programming is focussed on <strong>what</strong>
transformations are done to the data, rather than <strong>how</strong>
these transformations are performed (i.e. a detailed sequence of steps
which update the state of the code to reach a desired state). Let us
compare and contrast examples of these two programming paradigms.</p>
<section><h2 class="section-heading" id="functional-vs-procedural-programming">Functional vs Procedural Programming<a class="anchor" aria-label="anchor" href="#functional-vs-procedural-programming"></a></h2>
<hr class="half-width"><p>The following two code examples implement the calculation of a
factorial in procedural and functional styles, respectively. Recall that
the factorial of a number <code>n</code> (denoted by <code>n!</code>) is
calculated as the product of integer numbers from 1 to
<code>n</code>.</p>
<p>The first example provides a procedural style factorial function.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">def</span> factorial(n):</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="co">"""Calculate the factorial of a given number.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">    :param int n: The factorial to calculate</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">    :return: The resultant factorial</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Only use non-negative integers.'</span>)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    factorial <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n <span class="op">+</span> <span class="dv">1</span>): <span class="co"># iterate from 1 to n</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>        <span class="co"># save intermediate value to use in the next iteration</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>        factorial <span class="op">=</span> factorial <span class="op">*</span> i</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>    <span class="cf">return</span> factorial</span></code></pre>
</div>
<p>Functions in procedural programming are <em>procedures</em> that
describe a detailed list of instructions to tell the computer what to do
step by step and how to change the state of the program and advance
towards the result. They often use <em>iteration</em> to repeat a series
of steps. Functional programming, on the other hand, typically uses
<em>recursion</em> - an ability of a function to call/repeat itself
until a particular condition is reached. Let us see how it is used in
the functional programming example below to achieve a similar effect to
that of iteration in procedural programming.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Functional style factorial function</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">def</span> factorial(n):</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="co">"""Calculate the factorial of a given number.</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">    :param int n: The factorial to calculate</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">    :return: The resultant factorial</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Only use non-negative integers.'</span>)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> n <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span> <span class="co"># exit from recursion, prevents infinite loops</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>        <span class="cf">return</span>  n <span class="op">*</span> factorial(n<span class="op">-</span><span class="dv">1</span>) <span class="co"># recursive call to the same function</span></span></code></pre>
</div>
<p><em><strong>Note:</strong> You may have noticed that both functions
in the above code examples have the same signature (i.e. they take an
integer number as input and return its factorial as output). You could
easily swap these equivalent implementations without changing the way
that the function is invoked. Remember, a single piece of software may
well contain instances of multiple programming paradigms - including
procedural, functional and object-oriented - it is up to you to decide
which one to use and when to switch based on the problem at hand and
your personal coding style.</em></p>
<p>Functional computations only rely on the values that are provided as
inputs to a function and not on the state of the program that precedes
the function call. They do not modify data that exists outside the
current function, including the input data - this property is referred
to as the <em>immutability of data</em>. This means that such functions
do not create any <em>side effects</em>, i.e. do not perform any action
that affects anything other than the value they return. For example:
printing text, writing to a file, modifying the value of an input
argument, or changing the value of a global variable. Functions without
side affects that return the same data each time the same input
arguments are provided are called <em>pure functions</em>.</p>
<div id="exercise-pure-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-pure-functions" class="callout-inner">
<h3 class="callout-title">Exercise: Pure Functions</h3>
<div class="callout-content">
<p>Which of these functions are pure? If you are not sure, explain your
reasoning to someone else, do they agree?</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">def</span> add_one(x):</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">def</span> say_hello(name):</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Hello'</span>, name)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="kw">def</span> append_item_1(a_list, item):</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    a_list <span class="op">+=</span> [item]</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="cf">return</span> a_list</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="kw">def</span> append_item_2(a_list, item):</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    result <span class="op">=</span> a_list <span class="op">+</span> [item]</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
<code>add_one</code> is pure - it has no effects other than to
return a value and this value will always be the same when given the
same inputs</li>
<li>
<code>say_hello</code> is not pure - printing text counts as a side
effect, even though it is the clear purpose of the function</li>
<li>
<code>append_item_1</code> is not pure - the argument
<code>a_list</code> gets modified as a side effect - try this yourself
to prove it</li>
<li>
<code>append_item_2</code> is pure - the result is a new variable,
so this time <code>a_list</code> does not get modified - again, try this
yourself</li>
</ol></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="benefits-of-functional-code">Benefits of Functional Code<a class="anchor" aria-label="anchor" href="#benefits-of-functional-code"></a></h2>
<hr class="half-width"><p>There are a few benefits we get when working with pure functions:</p>
<ul><li>Testability</li>
<li>Composability</li>
<li>Parallelisability</li>
</ul><p><strong>Testability</strong> indicates how easy it is to test the
function - usually meaning unit tests. It is much easier to test a
function if we can be certain that a particular input will always
produce the same output. If a function we are testing might have
different results each time it runs (e.g. a function that generates
random numbers drawn from a normal distribution), we need to come up
with a new way to test it. Similarly, it can be more difficult to test a
function with side effects as it is not always obvious what the side
effects will be, or how to measure them.</p>
<p><strong>Composability</strong> refers to the ability to make a new
function from a chain of other functions by piping the output of one as
the input to the next. If a function does not have side effects or
non-deterministic behaviour, then all of its behaviour is reflected in
the value it returns. As a consequence of this, any chain of combined
pure functions is itself pure, so we keep all these benefits when we are
combining functions into a larger program. As an example of this, we
could make a function called <code>add_two</code>, using the
<code>add_one</code> function we already have.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">def</span> add_two(x):</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="cf">return</span> add_one(add_one(x))</span></code></pre>
</div>
<p><strong>Parallelisability</strong> is the ability for operations to
be performed at the same time (independently). If we know that a
function is fully pure and we have got a lot of data, we can often
improve performance by splitting data and distributing the computation
across multiple processors. The output of a pure function depends only
on its input, so we will get the right result regardless of when or
where the code runs.</p>
<div id="everything-in-moderation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="everything-in-moderation" class="callout-inner">
<h3 class="callout-title">Everything in Moderation</h3>
<div class="callout-content">
<p>Despite the benefits that pure functions can bring, we should not be
trying to use them everywhere. Any software we write needs to interact
with the rest of the world somehow, which requires side effects. With
pure functions you cannot read any input, write any output, or interact
with the rest of the world in any way, so we cannot usually write useful
software using just pure functions. Python programs or libraries written
in functional style will usually not be as extreme as to completely
avoid reading input, writing output, updating the state of internal
local variables, etc.; instead, they will provide a functional-appearing
interface but may use non-functional features internally. An example of
this is the <a href="https://pandas.pydata.org/" class="external-link">Python Pandas
library</a> for data manipulation built on top of NumPy - most of its
functions appear pure as they return new data objects instead of
changing existing ones.</p>
</div>
</div>
</div>
<p>There are other advantageous properties that can be derived from the
functional approach to coding. In languages which support functional
programming, a function is a <em>first-class object</em> like any other
object - not only can you compose/chain functions together, but
functions can be used as inputs to, passed around or returned as results
from other functions (remember, in functional programming <em>code is
data</em>). This is why functional programming is suitable for
processing data efficiently - in particular in the world of Big Data,
where code is much smaller than the data, sending the code to where data
is located is cheaper and faster than the other way round. Let us see
how we can do data processing using functional programming.</p>
</section><section><h2 class="section-heading" id="mapreduce-data-processing-approach">MapReduce Data Processing Approach<a class="anchor" aria-label="anchor" href="#mapreduce-data-processing-approach"></a></h2>
<hr class="half-width"><p>When working with data you will often find that you need to apply a
transformation to each datapoint of a dataset and then perform some
aggregation across the whole dataset. One instance of this data
processing approach is known as MapReduce and is applied when processing
(but not limited to) Big Data, e.g. using tools such as <a href="https://en.wikipedia.org/wiki/Apache_Spark" class="external-link">Spark</a> or <a href="https://hadoop.apache.org/" class="external-link">Hadoop</a>. The name MapReduce comes
from applying an operation to (mapping) each value in a dataset, then
performing a reduction operation which collects/aggregates all the
individual results together to produce a single result. MapReduce relies
heavily on composability and parallelisability of functional programming
- both map and reduce can be done in parallel and on smaller subsets of
data, before aggregating all intermediate results into the final
result.</p>
<div class="section level3">
<h3 id="mapping">Mapping<a class="anchor" aria-label="anchor" href="#mapping"></a></h3>
<p><code>map(f, C)</code> is a function takes another function
<code>f()</code> and a collection <code>C</code> of data items as
inputs. Calling <code>map(f, C)</code> applies the function
<code>f(x)</code> to every data item <code>x</code> in a collection
<code>C</code> and returns the resulting values as a new collection of
the same size.</p>
<p>This is a simple mapping that takes a list of names and returns a
list of the lengths of those names using the built-in function
<code>len()</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>name_lengths <span class="op">=</span> <span class="bu">map</span>(<span class="bu">len</span>, [<span class="st">"Mary"</span>, <span class="st">"Isla"</span>, <span class="st">"Sam"</span>])</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(name_lengths))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[4, 4, 3]</code></pre>
</div>
<p>This is a mapping that squares every number in the passed collection
using anonymous, inlined <em>lambda</em> expression (a simple one-line
mathematical expression representing a function):</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>squares <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x <span class="op">*</span> x, [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(squares))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0, 1, 4, 9, 16]</code></pre>
</div>
<div id="lambda" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="lambda" class="callout-inner">
<h3 class="callout-title">Lambda</h3>
<div class="callout-content">
<p>Lambda expressions are used to create anonymous functions that can be
used to write more compact programs by inlining function code. A lambda
expression takes any number of input parameters and creates an anonymous
function that returns the value of the expression. So, we can use the
short, one-line <code>lambda x, y, z, ...: expression</code> code
instead of defining and calling a named function <code>f()</code> as
follows:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">def</span> f(x, y, z, ...):</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="cf">return</span> expression</span></code></pre>
</div>
<p>The major distinction between lambda functions and ‘normal’ functions
is that lambdas do not have names. We could give a name to a lambda
expression if we really wanted to - but at that point we should be using
a ‘normal’ Python function instead.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Do not do this</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>add_one <span class="op">=</span> <span class="kw">lambda</span> x: x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># Do this instead</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">def</span> add_one(x):</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>In addition to using built-in or inlining anonymous lambda functions,
we can also pass a named function that we have defined ourselves to the
<code>map()</code> function.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">def</span> add_one(num):</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="cf">return</span> num <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>result <span class="op">=</span> <span class="bu">map</span>(add_one, [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(result))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1, 2, 3]</code></pre>
</div>
<div id="exercise-check-inflammation-patient-data-against-a-threshold-using-map" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-check-inflammation-patient-data-against-a-threshold-using-map" class="callout-inner">
<h3 class="callout-title">Exercise: Check Inflammation Patient Data
Against A Threshold Using Map</h3>
<div class="callout-content">
<p>Write a new function called <code>daily_above_threshold()</code> in
our inflammation <code>models.py</code> that determines whether or not
each daily inflammation value for a given patient exceeds a given
threshold.</p>
<p>Given a patient row number in our data, the patient dataset itself,
and a given threshold, write the function to use <code>map()</code> to
generate and return a list of booleans, with each value representing
whether or not the daily inflammation value for that patient exceeded
the given threshold.</p>
<p>Ordinarily we would use Numpy’s own <code>map</code> feature, but for
this exercise, let us try a solution without it.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">def</span> daily_above_threshold(patient_num, data, threshold):</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    <span class="co">"""Determine whether or not each daily inflammation value exceeds a given threshold for a given patient.</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">    :param patient_num: The patient row number</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">    :param data: A 2D data array with inflammation data</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">    :param threshold: An inflammation threshold to check each daily value against</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">    :returns: A boolean list representing whether or not each patient's daily inflammation exceeded the threshold</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;</span> threshold, data[patient_num]))</span></code></pre>
</div>
<p><em><strong>Note:</strong> <code>map()</code> function returns a map
iterator object which needs to be converted to a collection object (such
as a list, dictionary, set, tuple) using the corresponding “factory”
function (in our case <code>list()</code>).</em></p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="comprehensions-for-mappingdata-generation">Comprehensions for Mapping/Data Generation<a class="anchor" aria-label="anchor" href="#comprehensions-for-mappingdata-generation"></a></h4>
<p>Another way you can generate new collections of data from existing
collections in Python is using <em>comprehensions</em>, which are an
elegant and concise way of creating data from <a href="https://www.w3schools.com/python/python_iterators.asp" class="external-link">iterable
objects</a> using <em>for loops</em>. While not a pure functional
concept, comprehensions provide data generation functionality and can be
used to achieve the same effect as the built-in “pure functional”
function <code>map()</code>. They are commonly used and actually
recommended as a replacement of <code>map()</code> in modern Python. Let
us have a look at some examples.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>integers <span class="op">=</span> <span class="bu">range</span>(<span class="dv">5</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>double_ints <span class="op">=</span> [<span class="dv">2</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> integers]</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="bu">print</span>(double_ints)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0, 2, 4, 6, 8]</code></pre>
</div>
<p>The above example uses a <em>list comprehension</em> to double each
number in a sequence. Notice the similarity between the syntax for a
list comprehension and a for loop - in effect, this is a for loop
compressed into a single line. In this simple case, the code above is
equivalent to using a map operation on a sequence, as shown below:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>integers <span class="op">=</span> <span class="bu">range</span>(<span class="dv">5</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>double_ints <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> i: <span class="dv">2</span> <span class="op">*</span> i, integers)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(double_ints))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0, 2, 4, 6, 8]</code></pre>
</div>
<p>We can also use list comprehensions to filter data, by adding the
filter condition to the end:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>double_even_ints <span class="op">=</span> [<span class="dv">2</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> integers <span class="cf">if</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">print</span>(double_even_ints)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0, 4, 8]</code></pre>
</div>
<div id="set-and-dictionary-comprehensions-and-generators" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="set-and-dictionary-comprehensions-and-generators" class="callout-inner">
<h3 class="callout-title">Set and Dictionary Comprehensions and
Generators</h3>
<div class="callout-content">
<p>We also have <em>set comprehensions</em> and <em>dictionary
comprehensions</em>, which look similar to list comprehensions but use
the set literal and dictionary literal syntax, respectively.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>double_even_int_set <span class="op">=</span> {<span class="dv">2</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> integers <span class="cf">if</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>}</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="bu">print</span>(double_even_int_set)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>double_even_int_dict <span class="op">=</span> {i: <span class="dv">2</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> integers <span class="cf">if</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>}</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="bu">print</span>(double_even_int_dict)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>{0, 4, 8}
{0: 0, 2: 4, 4: 8}</code></pre>
</div>
<p>Finally, there is one last ‘comprehension’ in Python - a
<em>generator expression</em> - a type of an iterable object which we
can take values from and loop over, but does not actually compute any of
the values until we need them. Iterable is the generic term for anything
we can loop or iterate over - lists, sets and dictionaries are all
iterables.</p>
<p>The <code>range</code> function is an example of a generator - if we
created a <code>range(1000000000)</code>, but didn’t iterate over it,
we’d find that it takes almost no time to do. Creating a list containing
a similar number of values would take much longer, and could be at risk
of running out of memory.</p>
<p>We can build our own generators using a generator expression. These
look much like the comprehensions above, but act like a generator when
we use them. Note the syntax difference for generator expressions -
parenthesis are used in place of square or curly brackets.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>doubles_generator <span class="op">=</span> (<span class="dv">2</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> integers)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> doubles_generator:</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>   <span class="bu">print</span>(x)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">4</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">8</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Let us now have a look at reducing the elements of a data collection
into a single result.</p>
</div>
</div>
<div class="section level3">
<h3 id="reducing">Reducing<a class="anchor" aria-label="anchor" href="#reducing"></a></h3>
<p><code>reduce(f, C, initialiser)</code> function accepts a function
<code>f()</code>, a collection <code>C</code> of data items and an
optional <code>initialiser</code>, and returns a single cumulative value
which aggregates (reduces) all the values from the collection into a
single result. The reduction function first applies the function
<code>f()</code> to the first two values in the collection (or to the
<code>initialiser</code>, if present, and the first item from
<code>C</code>). Then for each remaining value in the collection, it
takes the result of the previous computation and the next value from the
collection as the new arguments to <code>f()</code> until we have
processed all of the data and reduced it to a single value. For example,
if collection <code>C</code> has 5 elements, the call
<code>reduce(f, C)</code> calculates:</p>
<pre><code><span><span class="fu">f</span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="va">C</span><span class="op">[</span><span class="fl">0</span><span class="op">]</span>, <span class="va">C</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="va">C</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="va">C</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, <span class="va">C</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></code></pre>
<p>One example of reducing would be to calculate the product of a
sequence of numbers.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>sequence <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="kw">def</span> product(a, b):</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">reduce</span>(product, sequence))</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="co"># The same reduction using a lambda function</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">reduce</span>((<span class="kw">lambda</span> a, b: a <span class="op">*</span> b), sequence))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">24</span></span>
<span><span class="fl">24</span></span></code></pre>
</div>
<p>Note that <code>reduce()</code> is not a built-in function like
<code>map()</code> - you need to import it from library
<code>functools</code>.</p>
<div id="exercise-calculate-the-sum-of-a-sequence-of-numbers-using-reduce" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-calculate-the-sum-of-a-sequence-of-numbers-using-reduce" class="callout-inner">
<h3 class="callout-title">Exercise: Calculate the Sum of a Sequence of
Numbers Using Reduce</h3>
<div class="callout-content">
<p>Using reduce calculate the sum of a sequence of numbers. Although in
practice we would use the built-in <code>sum()</code> function for this
- try doing it without it.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>sequence <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">reduce</span>(add, sequence))</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="co"># The same reduction using a lambda function</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">reduce</span>((<span class="kw">lambda</span> a, b: a <span class="op">+</span> b), sequence))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span>
<span><span class="fl">10</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="putting-it-all-together">Putting It All Together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a></h3>
<p>Let us now put together what we have learned about map and reduce so
far by writing a function that calculates the sum of the squares of the
values in a list using the MapReduce approach.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="kw">def</span> sum_of_squares(sequence):</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    squares <span class="op">=</span> [x <span class="op">*</span> x <span class="cf">for</span> x <span class="kw">in</span> sequence]  <span class="co"># use list comprehension for mapping</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> a, b: a <span class="op">+</span> b, squares)</span></code></pre>
</div>
<p>We should see the following behaviour when we use it:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="dv">0</span>]))</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="dv">1</span>]))</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">3</span>]))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">14</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">14</span></span></code></pre>
</div>
<p>Now let’s assume we’re reading in these numbers from an input file,
so they arrive as a list of strings. We will modify the function so that
it passes the following tests:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>]))</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="st">'-1'</span>, <span class="st">'-2'</span>, <span class="st">'-3'</span>]))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">14</span></span>
<span><span class="fl">14</span></span></code></pre>
</div>
<p>The code may look like:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="kw">def</span> sum_of_squares(sequence):</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    integers <span class="op">=</span> [<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> sequence]</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    squares <span class="op">=</span> [x <span class="op">*</span> x <span class="cf">for</span> x <span class="kw">in</span> integers]</span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> a, b: a <span class="op">+</span> b, squares)</span></code></pre>
</div>
<p>Finally, like comments in Python, we’d like it to be possible for
users to comment out numbers in the input file they give to our program.
We will finally extend our function so that the following tests
pass:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>]))</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="st">'-1'</span>, <span class="st">'-2'</span>, <span class="st">'-3'</span>]))</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="bu">print</span>(sum_of_squares([<span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'#100'</span>, <span class="st">'3'</span>]))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">14</span></span>
<span><span class="fl">14</span></span>
<span><span class="fl">14</span></span></code></pre>
</div>
<p>To do so, we may filter out certain elements and have:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="kw">def</span> sum_of_squares(sequence):</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>    integers <span class="op">=</span> [<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> sequence <span class="cf">if</span> x[<span class="dv">0</span>] <span class="op">!=</span> <span class="st">'#'</span>]</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>    squares <span class="op">=</span> [x <span class="op">*</span> x <span class="cf">for</span> x <span class="kw">in</span> integers]</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> a, b: a <span class="op">+</span> b, squares)</span></code></pre>
</div>
<div id="exercise-extend-inflammation-threshold-function-using-reduce" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-extend-inflammation-threshold-function-using-reduce" class="callout-inner">
<h3 class="callout-title">Exercise: Extend Inflammation Threshold
Function Using Reduce</h3>
<div class="callout-content">
<p>Extend the <code>daily_above_threshold()</code> function you wrote
previously to return a count of the number of days a patient’s
inflammation is over the threshold. Use <code>reduce()</code> over the
boolean array that was previously returned to generate the count, then
return that value from the function.</p>
<p>You may choose to define a separate function to pass to
<code>reduce()</code>, or use an inline lambda expression to do it
(which is a bit trickier!).</p>
<p>Hints:</p>
<ul><li>Remember that you can define an <code>initialiser</code> value with
<code>reduce()</code> &gt; to help you start the counter</li>
<li>If defining a lambda expression, &gt; note that it can conditionally
return different values using the syntax &gt;
<code>&lt;value&gt; if &lt;condition&gt; else &lt;another_value&gt;</code>
in the expression.</li>
</ul></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Using a separate function:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="kw">def</span> daily_above_threshold(patient_num, data, threshold):</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>    <span class="co">"""Count how many days a given patient's inflammation exceeds a given threshold.</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co">    :param patient_num: The patient row number</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">    :param data: A 2D data array with inflammation data</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="co">    :param threshold: An inflammation threshold to check each daily value against</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="co">    :returns: An integer representing the number of days a patient's inflammation is over a given threshold</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a>    <span class="kw">def</span> count_above_threshold(a, b):</span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a>        <span class="cf">if</span> b:</span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a>            <span class="cf">return</span> a <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a>            <span class="cf">return</span> a</span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a></span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a>   <span class="co"># Use map to determine if each daily inflammation value exceeds a given threshold for a patient</span></span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a>   above_threshold <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;</span> threshold, data[patient_num])</span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a>   <span class="co"># Use reduce to count on how many days inflammation was above the threshold for a patient</span></span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a>   <span class="cf">return</span> <span class="bu">reduce</span>(count_above_threshold, above_threshold, <span class="dv">0</span>)</span></code></pre>
</div>
<p>Note that the <code>count_above_threshold</code> function used by
<code>reduce()</code> was defined within the
<code>daily_above_threshold()</code> function to limit its scope and
clarify its purpose (i.e. it may only be useful as part of
<code>daily_above_threshold()</code> hence being defined as an inner
function).</p>
<p>The equivalent code using a lambda expression may look like:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>...</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="kw">def</span> daily_above_threshold(patient_num, data, threshold):</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="co">"""Count how many days a given patient's inflammation exceeds a given threshold.</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="co">    :param patient_num: The patient row number</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="co">    :param data: A 2D data array with inflammation data</span></span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a><span class="co">    :param threshold: An inflammation threshold to check each daily value against</span></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a><span class="co">    :returns: An integer representing the number of days a patient's inflammation is over a given threshold</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a>    above_threshold <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;</span> threshold, data[patient_num])</span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> a, b: a <span class="op">+</span> <span class="dv">1</span> <span class="cf">if</span> b <span class="cf">else</span> a, above_threshold, <span class="dv">0</span>)</span></code></pre>
</div>
<p>Where could this be useful? For example, you may want to define the
success criteria for a trial if, say, 80% of patients do not exhibit
inflammation in any of the trial days, or some similar metrics.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="decorators">Decorators<a class="anchor" aria-label="anchor" href="#decorators"></a></h2>
<hr class="half-width"><p>Finally, we will look at one last aspect of Python where functional
programming is coming handy. As we have seen in the <a href="22-scaling-up-unit-testing.html#parameterising-our-unit-tests">episode
on parametrising our unit tests</a>, a decorator can take a function,
modify/decorate it, then return the resulting function. This is possible
because Python treats functions as first-class objects that can be
passed around as normal data. Here, we discuss decorators in more detail
and learn how to write our own. Let us look at the following code for
ways on how to “decorate” functions.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="kw">def</span> with_logging(func):</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>    <span class="co">"""A decorator which adds logging to a function."""</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>    <span class="kw">def</span> inner(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Before function call"</span>)</span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"After function call"</span>)</span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a>    <span class="cf">return</span> inner</span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a><span class="kw">def</span> add_one(n):</span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Adding one"</span>)</span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a><span class="co"># Redefine function add_one by wrapping it within with_logging function</span></span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a>add_one <span class="op">=</span> with_logging(add_one)</span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a><span class="co"># Another way to redefine a function - using a decorator</span></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a><span class="at">@with_logging</span></span>
<span id="cb40-22"><a href="#cb40-22" tabindex="-1"></a><span class="kw">def</span> add_two(n):</span>
<span id="cb40-23"><a href="#cb40-23" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Adding two"</span>)</span>
<span id="cb40-24"><a href="#cb40-24" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb40-25"><a href="#cb40-25" tabindex="-1"></a></span>
<span id="cb40-26"><a href="#cb40-26" tabindex="-1"></a><span class="bu">print</span>(add_one(<span class="dv">1</span>))</span>
<span id="cb40-27"><a href="#cb40-27" tabindex="-1"></a><span class="bu">print</span>(add_two(<span class="dv">1</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Before function call
Adding one
After function call
2
Before function call
Adding two
After function call
3</code></pre>
</div>
<p>In this example, we see a decorator (<code>with_logging</code>) and
two different syntaxes for applying the decorator to a function. The
decorator is implemented here as a function which encloses another
function. Because the inner function (<code>inner()</code>) calls the
function being decorated (<code>func()</code>) and returns its result,
it still behaves like this original function. Part of this is the use of
<code>*args</code> and <code>**kwargs</code> - these allow our decorated
function to accept any arguments or keyword arguments and pass them
directly to the function being decorated. Our decorator in this case
does not need to modify any of the arguments, so we do not need to know
what they are. Any additional behaviour we want to add as part of our
decorated function, we can put before or after the call to the original
function. Here we print some text both before and after the decorated
function, to show the order in which events happen.</p>
<p>We also see in this example the two different ways in which a
decorator can be applied. The first of these is to use a normal function
call (<code>with_logging(add_one)</code>), where we then assign the
resulting function back to a variable - often using the original name of
the function, so replacing it with the decorated version. The second
syntax is the one we have seen previously (<code>@with_logging</code>).
This syntax is equivalent to the previous one - the result is that we
have a decorated version of the function, here with the name
<code>add_two</code>. Both of these syntaxes can be useful in different
situations: the <code>@</code> syntax is more concise if we never need
to use the un-decorated version, while the function-call syntax gives us
more flexibility - we can continue to use the un-decorated function if
we make sure to give the decorated one a different name, and can even
make multiple decorated versions using different decorators.</p>
<div id="exercise-measuring-performance-using-decorators" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-measuring-performance-using-decorators" class="callout-inner">
<h3 class="callout-title">Exercise: Measuring Performance Using
Decorators</h3>
<div class="callout-content">
<p>One small task you might find a useful case for a decorator is
measuring the time taken to execute a particular function. This is an
important part of performance profiling.</p>
<p>Write a decorator which you can use to measure the execution time of
the decorated function using the <a href="https://docs.python.org/3/library/time.html#time.process_time_ns" class="external-link">time.process_time_ns()</a>
function. There are several different timing functions each with
slightly different use-cases, but we won’t worry about that here.</p>
<p>For the function to measure, you may wish to use this as an
example:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="kw">def</span> measure_me(n):</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>    total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>        total <span class="op">+=</span> i <span class="op">*</span> i</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>    <span class="cf">return</span> total</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="kw">def</span> profile(func):</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>    <span class="kw">def</span> inner(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>        start <span class="op">=</span> time.process_time_ns()</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a>        stop <span class="op">=</span> time.process_time_ns()</span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Took </span><span class="sc">{0}</span><span class="st"> seconds"</span>.<span class="bu">format</span>((stop <span class="op">-</span> start) <span class="op">/</span> <span class="fl">1e9</span>))</span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a>    <span class="cf">return</span> inner</span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a><span class="at">@profile</span></span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a><span class="kw">def</span> measure_me(n):</span>
<span id="cb43-16"><a href="#cb43-16" tabindex="-1"></a>    total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb43-17"><a href="#cb43-17" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb43-18"><a href="#cb43-18" tabindex="-1"></a>        total <span class="op">+=</span> i <span class="op">*</span> i</span>
<span id="cb43-19"><a href="#cb43-19" tabindex="-1"></a></span>
<span id="cb43-20"><a href="#cb43-20" tabindex="-1"></a>    <span class="cf">return</span> total</span>
<span id="cb43-21"><a href="#cb43-21" tabindex="-1"></a></span>
<span id="cb43-22"><a href="#cb43-22" tabindex="-1"></a><span class="bu">print</span>(measure_me(<span class="dv">1000000</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Took 0.124199753 seconds
333332833333500000</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Functional programming is a programming paradigm where programs are
constructed by applying and composing smaller and simple functions into
more complex ones (which describe the flow of data within a program as a
sequence of data transformations).</li>
<li>In functional programming, functions tend to be <em>pure</em> - they
do not exhibit <em>side-effects</em> (by not affecting anything other
than the value they return or anything outside a function). Functions
can also be named, passed as arguments, and returned from other
functions, just as any other data type.</li>
<li>MapReduce is an instance of a data generation and processing
approach, in particular suited for functional programming and handling
Big Data within parallel and distributed environments.</li>
<li>Python provides comprehensions for lists, dictionaries, sets and
generators - a concise (if not strictly functional) way to generate new
data from existing data collections while performing sophisticated
mapping, filtering and conditional logic on original dataset’s
members.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/python-intermediate-development/edit/main/learners/functional-programming.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development/" class="external-link">Source</a></p>
        <p>
        <a href="https://github.com/carpentries-incubator/python-intermediate-development/blob/main/" class="external-link">Cite</a>
        | <a href="mailto:info@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/" class="external-link">sandpaper (0.18.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/" class="external-link">varnish (1.0.9)</a></p>
		</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/functional-programming.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Extra Content: Functional Programming",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/functional-programming.html",
  "identifier": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/functional-programming.html",
  "dateCreated": "2020-04-23",
  "dateModified": "2024-12-06",
  "datePublished": "2026-01-27"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

