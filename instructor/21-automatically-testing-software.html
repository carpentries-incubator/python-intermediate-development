<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Intermediate Research Software Development: 2.1 Automatically Testing Software</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../21-automatically-testing-software.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Intermediate Research Software Development
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Intermediate Research Software Development
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="quiz.html">Quiz</a></li><li><a class="dropdown-item" href="installation-instructions.html">Installation Instructions</a></li><li><a class="dropdown-item" href="common-issues.html">Common Issues, Fixes &amp; Tips</a></li><li><a class="dropdown-item" href="software-architecture-extra.html">Extra Content: Software Architecture</a></li><li><a class="dropdown-item" href="programming-paradigms.html">Extra Content: Programming Paradigms</a></li><li><a class="dropdown-item" href="procedural-programming.html">Extra Content: Procedural Programming</a></li><li><a class="dropdown-item" href="functional-programming.html">Extra Content: Functional Programming</a></li><li><a class="dropdown-item" href="object-oriented-programming.html">Extra Content: Object Oriented Programming</a></li><li><a class="dropdown-item" href="persistence.html">Extra Content: Persistence</a></li><li><a class="dropdown-item" href="databases.html">Extra Content: Databases</a></li><li><a class="dropdown-item" href="vscode.html">Extra Content: Using Microsoft Visual Studio Code</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Intermediate Research Software Development
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 26%" class="percentage">
    26%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 26%" aria-valuenow="26" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../21-automatically-testing-software.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-setting-the-scene.html">Setting the Scene</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="10-section1-intro.html">Section 1: Setting Up Environment For Collaborative Code Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="11-software-project.html">1.1 Introduction to Our Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="12-virtual-environments.html">1.2 Virtual Environments For Software Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="13-ides.html">1.3 Integrated Software Development Environments</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="14-collaboration-using-git.html">1.4 Software Development Using Git and GitHub</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="15-coding-conventions.html">1.5 Python Code Style Conventions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="16-verifying-code-style-linters.html">1.6 Verifying Code Style Using Linters</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="17-section1-optional-exercises.html">1.7 Optional Exercises for Section 1</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="20-section2-intro.html">Section 2: Ensuring Correctness of Software at Scale</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        2.1 Automatically Testing Software
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-software-testing">What Is Software Testing?</a></li>
<li><a href="#set-up-a-new-feature-branch-for-writing-tests">Set Up a New Feature Branch for Writing Tests</a></li>
<li><a href="#inflammation-data-analysis">Inflammation Data Analysis</a></li>
<li><a href="#writing-tests-to-verify-correct-behaviour">Writing Tests to Verify Correct Behaviour</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="22-scaling-up-unit-testing.html">2.2 Scaling Up Unit Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="23-continuous-integration-automated-testing.html">2.3 Continuous Integration for Automated Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="24-diagnosing-issues-improving-robustness.html">2.4 Diagnosing Issues and Improving Robustness</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="25-section2-optional-exercises.html">2.5 Optional Exercises for Section 2</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="30-section3-intro.html">Section 3: Software Development as a Process</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="31-software-requirements.html">3.1 Software Requirements</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="32-software-architecture-design.html">3.2 Software Architecture and Design</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush20">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading20">
        <a href="33-code-decoupling-abstractions.html">3.3 Code Decoupling &amp; Abstractions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="34-code-refactoring.html">3.4 Code Refactoring</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="35-software-architecture-revisited.html">3.5 Software Architecture Revisited</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="40-section4-intro.html">Section 4: Collaborative Software Development for Reuse</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="41-code-review.html">4.1 Developing Software In a Team: Code Review</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush25">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading25">
        <a href="42-software-reuse.html">4.2 Preparing Software for Reuse and Release</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush26">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading26">
        <a href="43-software-release.html">4.3 Packaging Code for Release and Distribution</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush27">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading27">
        <a href="50-section5-intro.html">Section 5: Managing and Improving Software Over Its Lifetime</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush28">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading28">
        <a href="51-managing-software.html">5.1 Managing a Collaborative Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush29">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading29">
        <a href="52-assessing-software-suitability-improvement.html">5.2 Assessing Software for Suitability and Improvement</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush30">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading30">
        <a href="53-improvement-through-feedback.html">5.3 Software Improvement Through Feedback</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush31">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading31">
        <a href="60-wrap-up.html">Wrap-up</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="quiz.html">Quiz</a></li><li><a class="dropdown-item" href="installation-instructions.html">Installation Instructions</a></li><li><a class="dropdown-item" href="common-issues.html">Common Issues, Fixes &amp; Tips</a></li><li><a class="dropdown-item" href="software-architecture-extra.html">Extra Content: Software Architecture</a></li><li><a class="dropdown-item" href="programming-paradigms.html">Extra Content: Programming Paradigms</a></li><li><a class="dropdown-item" href="procedural-programming.html">Extra Content: Procedural Programming</a></li><li><a class="dropdown-item" href="functional-programming.html">Extra Content: Functional Programming</a></li><li><a class="dropdown-item" href="object-oriented-programming.html">Extra Content: Object Oriented Programming</a></li><li><a class="dropdown-item" href="persistence.html">Extra Content: Persistence</a></li><li><a class="dropdown-item" href="databases.html">Extra Content: Databases</a></li><li><a class="dropdown-item" href="vscode.html">Extra Content: Using Microsoft Visual Studio Code</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/20-section2-intro.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/22-scaling-up-unit-testing.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/20-section2-intro.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Section 2: Ensuring
        </a>
        <a class="chapter-link float-end" href="../instructor/22-scaling-up-unit-testing.html" rel="next">
          Next: 2.2 Scaling Up Unit...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>2.1 Automatically Testing Software</h1>
        <p>Last updated on 2025-02-25 |

        <a href="https://github.com/carpentries-incubator/python-intermediate-development/edit/main/episodes/21-automatically-testing-software.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Does the code we develop work the way it should do?</li>
<li>Can we (and others) verify these assertions for themselves?</li>
<li>To what extent are we confident of the accuracy of results that are
generated by code and appear in publications?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Explain the reasons why testing is important</li>
<li>Describe the three main types of tests and what each are used
for</li>
<li>Implement and run unit tests to verify the correct behaviour of
program functions</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h2>
<hr class="half-width"><p>Being able to demonstrate that a process generates the right results
is important in any field of research, whether it is software generating
those results or not. So when writing software we need to ask ourselves
some key questions:</p>
<ul><li>Does the code we develop work the way it should do?</li>
<li>Can we (and others) verify these assertions for themselves?</li>
<li>Perhaps most importantly, to what extent are we confident of the
accuracy of results that software produces?</li>
</ul><p>If we are unable to demonstrate that our software fulfills these
criteria, why would anyone use it? Having well-defined tests for our
software is useful for this, but manually testing software can prove an
expensive process.</p>
<p>Automation can help, and automation where possible is a good thing -
it enables us to define a potentially complex process in a repeatable
way that is far less prone to error than manual approaches. Once
defined, automation can also save us a lot of effort, particularly in
the long run. In this episode we will look into techniques of automated
testing to improve the predictability of a software change, make
development more productive, and help us produce code that works as
expected and produces desired results.</p>
<div id="activate-your-virtual-environment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="activate-your-virtual-environment" class="callout-inner">
<h3 class="callout-title">Activate your virtual environment</h3>
<div class="callout-content">
<p>If it is not already active, make sure to activate your virtual
environment, called <code>venv</code>, from the root of the software
project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-is-software-testing">What Is Software Testing?<a class="anchor" aria-label="anchor" href="#what-is-software-testing"></a></h2>
<hr class="half-width"><p>For the sake of argument, if each line we write has a 99% chance of
being right, then a 70-line program will be wrong more than half the
time. We need to do better than that, which means we need to test our
software to catch these mistakes.</p>
<p>We can and should extensively test our software manually, and manual
testing is well-suited to testing aspects such as graphical user
interfaces and reconciling visual outputs against inputs. However, even
with a good test plan, manual testing is very time consuming and prone
to error. Another style of testing is automated testing, where we write
code that tests the functions of our software. Since computers are very
good and efficient at automating repetitive tasks, we should take
advantage of this wherever possible.</p>
<p>There are three main types of automated tests:</p>
<ul><li>
<strong>Unit tests</strong> are tests for fairly small and specific
units of functionality, e.g. determining that a particular function
returns output as expected given specific inputs.</li>
<li>
<strong>Functional or integration tests</strong> work at a higher
level, and test functional paths through your code, e.g. given some
specific inputs, a set of interconnected functions across a number of
modules (or the entire code) produce the expected result. These are
particularly useful for exposing faults in how functional units
interact.</li>
<li>
<strong>Regression tests</strong> make sure that your program’s
output hasn’t changed, for example after making changes your code to add
new functionality or fix a bug.</li>
</ul><p>For the purposes of this course, we will focus on unit tests. But the
principles and practices we wll talk about can be built on and applied
to the other types of tests too.</p>
</section><section><h2 class="section-heading" id="set-up-a-new-feature-branch-for-writing-tests">Set Up a New Feature Branch for Writing Tests<a class="anchor" aria-label="anchor" href="#set-up-a-new-feature-branch-for-writing-tests"></a></h2>
<hr class="half-width"><p>We are going to look at how to run some existing tests and also write
some new ones, so let us ensure we are initially on our
<code>develop</code> branch. We will create a new feature branch called
<code>test-suite</code> off the <code>develop</code> branch - a common
term we use to refer to sets of tests - that we will use for our test
writing work:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git switch develop</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> test-suite</span></code></pre>
</div>
<p>Good practice is to write our tests around the same time we write our
code on a feature branch. But since the code already exists, we are
creating a feature branch for just these extra tests. Git branches are
designed to be lightweight, and where necessary, transient, and use of
branches for even small bits of work is encouraged.</p>
<p>Later on, once we have finished writing these tests and are convinced
they work properly, we will merge our <code>test-suite</code> branch
back into <code>develop</code>. Once bigger code changes are completed,
merged to <code>develop</code> from various feature branches and tested
<em>together</em> with existing code - which of course may also have
been changed by other developers in the meantime - we will merge all of
the work into <code>main</code>.</p>
</section><section><h2 class="section-heading" id="inflammation-data-analysis">Inflammation Data Analysis<a class="anchor" aria-label="anchor" href="#inflammation-data-analysis"></a></h2>
<hr class="half-width"><p>Let us go back to our <a href="11-software-project.html">patient
inflammation software project</a>. Recall that it is based on a clinical
trial of inflammation in patients who have been given a new treatment
for arthritis. There are a number of datasets in the <code>data</code>
directory recording inflammation information in patients (each file
representing a different trial), and are each stored in comma-separated
values (CSV) format: each row holds information for a single patient,
and the columns represent successive days when inflammation was measured
in patients.</p>
<p>Let us take a quick look at the data now from within the Python
command line console. Change directory to the repository root (which
should be in your home directory
<code>~/python-intermediate-inflammation</code>), ensure you have your
virtual environment activated in your command line terminal
(particularly if opening a new one), and then start the Python console
by invoking the Python interpreter without any parameters, e.g.:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd ~/python-intermediate-inflammation</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> source venv/bin/activate</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">$</span> python3</span></code></pre>
</div>
<p>The last command will start the Python console within your shell,
which enables us to execute Python commands interactively. Inside the
console enter the following:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>data <span class="op">=</span> np.loadtxt(fname<span class="op">=</span><span class="st">'data/inflammation-01.csv'</span>, delimiter<span class="op">=</span><span class="st">','</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>data.shape</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(60, 40)</code></pre>
</div>
<p>The data in this case is two-dimensional - it has 60 rows (one for
each patient) and 40 columns (one for each day). Each cell in the data
represents an inflammation reading on a given day for a patient.</p>
<p>Our patient inflammation application has a number of statistical
functions held in <code>inflammation/models.py</code>:
<code>daily_mean()</code>, <code>daily_max()</code> and
<code>daily_min()</code>, for calculating the mean average, the maximum,
and the minimum values for a given number of rows in our data. For
example, the <code>daily_mean()</code> function looks like this:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">def</span> daily_mean(data):</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="co">"""Calculate the daily mean of a 2D inflammation data array for each day.</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">    :param data: A 2D data array with inflammation data (each row contains measurements for a single patient across all days).</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">    :returns: An array of mean values of measurements for each day.</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="cf">return</span> np.mean(data, axis<span class="op">=</span><span class="dv">0</span>)</span></code></pre>
</div>
<p>Here, we use NumPy’s <code>np.mean()</code> function to calculate the
mean <em>vertically</em> across the data (denoted by
<code>axis=0</code>), which is then returned from the function. So, if
<code>data</code> was a NumPy array of three rows like…</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a> [<span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a> [<span class="dv">5</span>, <span class="dv">6</span>]]</span></code></pre>
</div>
<p>…the function would return a 1D NumPy array of <code>[3, 4]</code> -
each value representing the mean of each column (which are,
coincidentally, the same values as the second row in the above data
array).</p>
<p>To show this working with our patient data, we can use the function
like this, passing the first four patient rows to the function in the
Python console:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">from</span> inflammation.models <span class="im">import</span> daily_mean</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>daily_mean(data[<span class="dv">0</span>:<span class="dv">4</span>])</span></code></pre>
</div>
<p>Note we use a different form of <code>import</code> here - only
importing the <code>daily_mean</code> function from our
<code>models</code> instead of everything. This also has the effect that
we can refer to the function using only its name, without needing to
include the module name too
(i.e. <code>inflammation.models.daily_mean()</code>).</p>
<p>The above code will return the mean inflammation for each day column
across the first four patients (as a 1D NumPy array of shape (40,
0)):</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([ 0.  ,  0.5 ,  1.5 ,  1.75,  2.5 ,  1.75,  3.75,  3.  ,  5.25,
        6.25,  7.  ,  7.  ,  7.  ,  8.  ,  5.75,  7.75,  8.5 , 11.  ,
        9.75, 10.25, 15.  ,  8.75,  9.75, 10.  ,  8.  , 10.25,  8.  ,
        5.5 ,  8.  ,  6.  ,  5.  ,  4.75,  4.75,  4.  ,  3.25,  4.  ,
        1.75,  2.25,  0.75,  0.75])</code></pre>
</div>
<p>The other statistical functions are similar. Note that in real
situations functions we write are often likely to be more complicated
than these, but simplicity here allows us to reason about what’s
happening - and what we need to test - more easily.</p>
<p>Let us now look into how we can test each of our application’s
statistical functions to ensure they are functioning correctly.</p>
</section><section><h2 class="section-heading" id="writing-tests-to-verify-correct-behaviour">Writing Tests to Verify Correct Behaviour<a class="anchor" aria-label="anchor" href="#writing-tests-to-verify-correct-behaviour"></a></h2>
<hr class="half-width"><div class="section level3">
<h3 id="one-way-to-do-it">One Way to Do It<a class="anchor" aria-label="anchor" href="#one-way-to-do-it"></a></h3>
<p>One way to test our functions would be to write a series of checks or
tests, each executing a function we want to test with known inputs
against known valid results, and throw an error if we encounter a result
that is incorrect. So, referring back to our simple
<code>daily_mean()</code> example above, we could use
<code>[[1, 2], [3, 4], [5, 6]]</code> as an input to that function and
check whether the result equals <code>[3, 4]</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> numpy.testing <span class="im">as</span> npt</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>test_input <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>test_result <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>npt.assert_array_equal(daily_mean(test_input), test_result)</span></code></pre>
</div>
<p>So we use the <code>assert_array_equal()</code> function - part of
NumPy’s testing library - to test that our calculated result is the same
as our expected result. This function explicitly checks the array’s
shape and elements are the same, and throws an
<code>AssertionError</code> if they are not. In particular, note that we
cannot just use <code>==</code> or other Python equality methods, since
these will not work properly with NumPy arrays in all cases.</p>
<p>We could then add to this with other tests that use and test against
other values, and end up with something like:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>test_input <span class="op">=</span> np.array([[<span class="dv">2</span>, <span class="dv">0</span>], [<span class="dv">4</span>, <span class="dv">0</span>]])</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>test_result <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">0</span>])</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>npt.assert_array_equal(daily_mean(test_input), test_result)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>test_input <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">0</span>]])</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>test_result <span class="op">=</span> np.array([<span class="dv">0</span>, <span class="dv">0</span>])</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>npt.assert_array_equal(daily_mean(test_input), test_result)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>test_input <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>test_result <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>npt.assert_array_equal(daily_mean(test_input), test_result)</span></code></pre>
</div>
<p>However, if we were to enter these in this order, we will find we get
the following after the first test:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>...
AssertionError:
Arrays are not equal

Mismatched elements: 1 / 2 (50%)
Max absolute difference: 1.
Max relative difference: 0.5
 x: array([3., 0.])
 y: array([2, 0])</code></pre>
</div>
<p>This tells us that one element between our generated and expected
arrays does not match, and shows us the different arrays.</p>
<p>We could put these tests in a separate script to automate the running
of these tests. But a Python script halts at the first failed assertion,
so the second and third tests aren’t run at all. It would be more
helpful if we could get data from all of our tests every time they are
run, since the more information we have, the faster we are likely to be
able to track down bugs. It would also be helpful to have some kind of
summary report: if our set of tests - known as a <strong>test
suite</strong> - includes thirty or forty tests (as it well might for a
complex function or library that’s widely used), we would like to know
how many passed or failed.</p>
<p>Going back to our failed first test, what was the issue? As it turns
out, the test itself was incorrect, and should have read:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>test_input <span class="op">=</span> np.array([[<span class="dv">2</span>, <span class="dv">0</span>], [<span class="dv">4</span>, <span class="dv">0</span>]])</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>test_result <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">0</span>])</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>npt.assert_array_equal(daily_mean(test_input), test_result)</span></code></pre>
</div>
<p>Which highlights an important point: as well as making sure our code
is returning correct answers, we also need to ensure the tests
themselves are also correct. Otherwise, we may go on to fix our code
only to return an incorrect result that <em>appears</em> to be correct.
So a good rule is to make tests simple enough to understand so we can
reason about both the correctness of our tests as well as our code.
Otherwise, our tests hold little value.</p>
</div>
<div class="section level3">
<h3 id="using-a-testing-framework">Using a Testing Framework<a class="anchor" aria-label="anchor" href="#using-a-testing-framework"></a></h3>
<p>Keeping these things in mind, here’s a different approach that builds
on the ideas we have seen so far but uses a <strong>unit testing
framework</strong>. In such a framework we define our tests we want to
run as functions, and the framework automatically runs each of these
functions in turn, summarising the outputs. And unlike our previous
approach, it will run every test regardless of any encountered test
failures.</p>
<p>Most people do not enjoy writing tests, so if we want them to
actually do it, it must be easy to:</p>
<ul><li>Add or change tests,</li>
<li>Understand the tests that have already been written,</li>
<li>Run those tests, and</li>
<li>Understand those tests’ results</li>
</ul><p>Test results must also be reliable. If a testing tool says that code
is working when it is not, or reports problems when there actually
aren’t any, people will lose faith in it and stop using it.</p>
<p>Look at <code>tests/test_models.py</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">"""Tests for statistics functions within the Model layer."""</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="im">import</span> numpy.testing <span class="im">as</span> npt</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="im">from</span> inflammation.models <span class="im">import</span> daily_mean</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="kw">def</span> test_daily_mean_zeros():</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    <span class="co">"""Test that mean function works for an array of zeros."""</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>    test_input <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>                           [<span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>                           [<span class="dv">0</span>, <span class="dv">0</span>]])</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    test_result <span class="op">=</span> np.array([<span class="dv">0</span>, <span class="dv">0</span>])</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="co"># Need to use NumPy testing functions to compare arrays</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>    npt.assert_array_equal(daily_mean(test_input), test_result)</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="kw">def</span> test_daily_mean_integers():</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>    <span class="co">"""Test that mean function works for an array of positive integers."""</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>    test_input <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>                           [<span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a>                           [<span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>    test_result <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>    <span class="co"># Need to use NumPy testing functions to compare arrays</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>    npt.assert_array_equal(daily_mean(test_input), test_result)</span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>...</span></code></pre>
</div>
<p>Here, although we have specified two of our previous manual tests as
separate functions, they run the same assertions. Each of these test
functions, in a general sense, are called <strong>test cases</strong> -
these are a specification of:</p>
<ul><li>Inputs, e.g. the <code>test_input</code> NumPy array</li>
<li>Execution conditions - what we need to do to set up the testing
environment to run our test, e.g. importing the
<code>daily_mean()</code> function so we can use it. Note that for
clarity of testing environment, we only import the necessary library
function we want to test within each test function</li>
<li>Testing procedure, e.g. running <code>daily_mean()</code> with our
<code>test_input</code> array and using
<code>assert_array_equal()</code> to test its validity</li>
<li>Expected outputs, e.g. our <code>test_result</code> NumPy array that
we test against</li>
</ul><p>Also, we are defining each of these things for a test case we can run
independently that requires no manual intervention.</p>
<p>Going back to our list of requirements, how easy is it to run these
tests? We can do this using a Python package called <code>pytest</code>.
Pytest is a testing framework that allows you to write test cases using
Python. You can use it to test things like Python functions, database
operations, or even things like service APIs - essentially anything that
has inputs and expected outputs. We will be using Pytest to write unit
tests, but what you learn can scale to more complex functional testing
for applications or libraries.</p>
<div id="what-about-unit-testing-frameworks-in-python-and-other-languages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-about-unit-testing-frameworks-in-python-and-other-languages" class="callout-inner">
<h3 class="callout-title">What About Unit Testing Frameworks in Python and Other Languages?</h3>
<div class="callout-content">
<p>Other unit testing frameworks exist for Python, including Nose2 and
Unittest, with Unittest supplied as part of the standard Python library.
It is also worth noting that Pytest supports tests written for Unittest,
a useful feature if you wish to prioritise use of the standard library
initially, but retain the option to move Pytest in the future.</p>
<p>The unit testing approach can be translated to (and is supported
within) other languages as well, e.g. pFUnit for Fortran, JUnit for Java
(the original unit testing framework), Catch or gtest for C++, etc.</p>
</div>
</div>
</div>
<div id="why-use-pytest-over-unittest" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-use-pytest-over-unittest" class="callout-inner">
<h3 class="callout-title">Why Use pytest over unittest?</h3>
<div class="callout-content">
<p>We could alternatively use another Python unit test framework, <a href="https://docs.python.org/3/library/unittest.html" class="external-link">unittest</a>,
which has the advantage of being installed by default as part of Python.
This is certainly a solid and established option, however <a href="https://realpython.com/pytest-python-testing/#what-makes-pytest-so-useful" class="external-link">pytest
has many distinct advantages</a>, particularly for learning,
including:</p>
<ul><li>unittest requires additional knowledge of object-oriented frameworks
(covered later in the course) to write unit tests, whereas in pytest
these are written in simpler functions so is easier to learn</li>
<li>Being written using simpler functions, pytest’s scripts are more
concise and contain less boilerplate, and thus are easier to read</li>
<li>pytest output, particularly in regard to test failure output, is
generally considered more helpful and readable</li>
<li>pytest has a vast ecosystem of plugins available if ever you need
additional testing functionality</li>
<li>unittest-style unit tests can be run from pytest out of the
box!</li>
</ul><p>A common challenge, particularly at the intermediate level, is the
selection of a suitable tool from many alternatives for a given task.
Once you have become accustomed to object-oriented programming you may
find unittest a better fit for a particular project or team, so you may
want to revisit it at a later date.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="installing-pytest">Installing Pytest<a class="anchor" aria-label="anchor" href="#installing-pytest"></a></h3>
<p>If you have already installed <code>pytest</code> package in your
virtual environment, you can skip this step. Otherwise, as we have seen,
we have a couple of options for installing external libraries:</p>
<ol style="list-style-type: decimal"><li>via PyCharm (see <a href="13-ides.html">“Adding an External
Library”</a> section in <a href="13-ides.html">“Integrated Software
Development Environments”</a> episode), or</li>
<li>via the command line (see <a href="12-virtual-environments.html">“Installing External Libraries in an
Environment With <code>pip</code>”</a> section in <a href="12-virtual-environments.html">“Virtual Environments For Software
Development”</a> episode).</li>
</ol><p>To do it via the command line - exit the Python console first (either
with <code>Ctrl-D</code> or by typing <code>exit()</code>), then do:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> pip install pytest</span></code></pre>
</div>
<p>Whether we do this via PyCharm or the command line, the results are
exactly the same: our virtual environment will now have the
<code>pytest</code> package installed for use.</p>
</div>
<div class="section level3">
<h3 id="running-tests">Running Tests<a class="anchor" aria-label="anchor" href="#running-tests"></a></h3>
<p>Now we can run these tests using <code>pytest</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> pytest tests/test_models.py</span></code></pre>
</div>
<p>Here, we use <code>-m</code> flag of the <code>python3</code> command
to invoke the <code>pytest</code> module, and specify the
<code>tests/test_models.py</code> file to run the tests in that file
explicitly.</p>
<div id="why-run-pytest-using-python3--m-pytest-and-not-pytest" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-run-pytest-using-python3--m-pytest-and-not-pytest" class="callout-inner">
<h3 class="callout-title">Why Run Pytest Using
<code>python3 -m pytest</code> and Not <code>pytest</code>?</h3>
<div class="callout-content">
<p><code>pytest</code> is another Python module that can be run via its
own command but this is a good example why invoking Python modules via
<code>python3 -m</code> may be better (recall the <a href="12-virtual-environments.html">explanation of Python interpreter’s
<code>-m</code> flag</a>). Had we used
<code>pytest tests/test_models.py</code> command directly, this would
have led to a “ModuleNotFoundError: No module named ‘inflammation’”
error. This is because <code>pytest</code> command (unlike
<code>python3 -m pytest</code>) does not add the current directory to
its list of directories to search for modules, hence the
<code>inflammation</code> subdirectory’s contents are not being ‘seen’
by <code>pytest</code> causing the <code>ModuleNotFoundError</code>.
There are ways to work around this problem but
<code>python3 -m pytest</code> ensures it does not happen in the first
place.</p>
</div>
</div>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>============================================== test session starts =================================
platform darwin -- Python 3.11.4, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/alex/work/SSI/training/lessons/python-intermediate-inflammation
plugins: anyio-4.0.0
collected 2 items

tests/test_models.py ..                                                                       [100%]

=============================================== 2 passed in 0.79s ==================================</code></pre>
</div>
<p>Pytest looks for functions whose names also start with the letters
‘test_’ and runs each one. Notice the <code>..</code> after our test
script:</p>
<ul><li>If the function completes without an assertion being triggered, we
count the test as a success (indicated as <code>.</code>).</li>
<li>If an assertion fails, or we encounter an error, we count the test
as a failure (indicated as <code>F</code>). The error is included in the
output so we can see what went wrong.</li>
</ul><p>So if we have many tests, we essentially get a report indicating
which tests succeeded or failed. Going back to our list of requirements
(the bullet points under <a href="#using-a-testing-framework">Using a
Testing Framework</a> section), do we think these results are easy to
understand?</p>
<div id="exercise-write-some-unit-tests" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-write-some-unit-tests" class="callout-inner">
<h3 class="callout-title">Exercise: Write Some Unit Tests</h3>
<div class="callout-content">
<p>We already have a couple of test cases in
<code>test/test_models.py</code> that test the <code>daily_mean()</code>
function. Looking at <code>inflammation/models.py</code>, write at least
two new test cases that test the <code>daily_max()</code> and
<code>daily_min()</code> functions, adding them to
<code>test/test_models.py</code>. Here are some hints:</p>
<ul><li>You could choose to format your functions very similarly to
<code>daily_mean()</code>, defining test input and expected result
arrays followed by the equality assertion.</li>
<li>Try to choose cases that are suitably different, and remember that
these functions take a 2D array and return a 1D array with each element
the result of analysing each <em>column</em> of the data.</li>
</ul><p>Once added, run all the tests again with
<code>python -m pytest tests/test_models.py</code>, and you should also
see your new tests pass.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">from</span> inflammation.models <span class="im">import</span> daily_max, daily_mean, daily_min</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>...</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">def</span> test_daily_max():</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    <span class="co">"""Test that max function works for an array of positive integers."""</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    test_input <span class="op">=</span> np.array([[<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>],</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>                           [<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">2</span>],</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>                           [<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">9</span>]])</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>    test_result <span class="op">=</span> np.array([<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">9</span>])</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>    npt.assert_array_equal(daily_max(test_input), test_result)</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="kw">def</span> test_daily_min():</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>    <span class="co">"""Test that min function works for an array of positive and negative integers."""</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>    test_input <span class="op">=</span> np.array([[ <span class="dv">4</span>, <span class="op">-</span><span class="dv">2</span>, <span class="dv">5</span>],</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a>                           [ <span class="dv">1</span>, <span class="op">-</span><span class="dv">6</span>, <span class="dv">2</span>],</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>                           [<span class="op">-</span><span class="dv">4</span>, <span class="op">-</span><span class="dv">1</span>, <span class="dv">9</span>]])</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    test_result <span class="op">=</span> np.array([<span class="op">-</span><span class="dv">4</span>, <span class="op">-</span><span class="dv">6</span>, <span class="dv">2</span>])</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>    npt.assert_array_equal(daily_min(test_input), test_result)</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>...</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The big advantage is that as our code develops we can update our test
cases and commit them back, ensuring that ourselves (and others) always
have a set of tests to verify our code at each step of development. This
way, when we implement a new feature, we can check a) that the feature
works using a test we write for it, and b) that the development of the
new feature does not break any existing functionality.</p>
</div>
<div class="section level3">
<h3 id="what-about-testing-for-errors">What About Testing for Errors?<a class="anchor" aria-label="anchor" href="#what-about-testing-for-errors"></a></h3>
<p>There are some cases where seeing an error is actually the correct
behaviour, and Python allows us to test for exceptions. Add this test in
<code>tests/test_models.py</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="im">from</span> inflammation.models <span class="im">import</span> daily_min</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>...</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">def</span> test_daily_min_string():</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="co">"""Test for TypeError when passing strings"""</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">TypeError</span>):</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>        error_expected <span class="op">=</span> daily_min([[<span class="st">'Hello'</span>, <span class="st">'there'</span>], [<span class="st">'General'</span>, <span class="st">'Kenobi'</span>]])</span></code></pre>
</div>
<p>Note that you need to import the <code>pytest</code> library at the
top of our <code>test_models.py</code> file with
<code>import pytest</code> so that we can use <code>pytest</code>’s
<code>raises()</code> function.</p>
<p>Run all your tests as before.</p>
<p>Since we have installed <code>pytest</code> to our environment, we
should also regenerate our <code>requirements.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span></code></pre>
</div>
<p>Finally, let us commit our new <code>test_models.py</code> file,
<code>requirements.txt</code> file, and test cases to our
<code>test-suite</code> branch, and push this new branch and all its
commits to GitHub:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git add requirements.txt tests/test_models.py</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add initial test cases for daily_max() and daily_min()"</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="ex">$</span> git push <span class="at">-u</span> origin test-suite</span></code></pre>
</div>
<div id="why-should-we-test-invalid-input-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-should-we-test-invalid-input-data" class="callout-inner">
<h3 class="callout-title">Why Should We Test Invalid Input Data?</h3>
<div class="callout-content">
<p>Testing the behaviour of inputs, both valid and invalid, is a really
good idea and is known as <em>data validation</em>. Even if you are
developing command line software that cannot be exploited by malicious
data entry, testing behaviour against invalid inputs prevents generation
of erroneous results that could lead to serious misinterpretation (as
well as saving time and compute cycles which may be expensive for
longer-running applications). It is generally best not to assume your
user’s inputs will always be rational.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>The three main types of automated tests are <strong>unit
tests</strong>, <strong>functional tests</strong> and <strong>regression
tests</strong>.</li>
<li>We can write unit tests to verify that functions generate expected
output given a set of specific inputs.</li>
<li>It should be easy to add or change tests, understand and run them,
and understand their results.</li>
<li>We can use a unit testing framework like Pytest to structure and
simplify the writing of tests in Python.</li>
<li>We should test for expected errors in our code.</li>
<li>Testing program behaviour against both valid and invalid inputs is
important and is known as <strong>data validation</strong>.</li>
</ul></div>
</div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/20-section2-intro.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/22-scaling-up-unit-testing.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/20-section2-intro.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Section 2: Ensuring
        </a>
        <a class="chapter-link float-end" href="../instructor/22-scaling-up-unit-testing.html" rel="next">
          Next: 2.2 Scaling Up Unit...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/python-intermediate-development/edit/main/episodes/21-automatically-testing-software.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/python-intermediate-development/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:info@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/21-automatically-testing-software.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "2.1 Automatically Testing Software",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/21-automatically-testing-software.html",
  "identifier": "https://carpentries-incubator.github.io/python-intermediate-development/instructor/21-automatically-testing-software.html",
  "dateCreated": "2020-04-23",
  "dateModified": "2025-02-25",
  "datePublished": "2025-02-25"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

